(()=>{"use strict";var t,i,e,l,r,s,h,o,n,a,f=function(t,i,e,l){if("a"===e&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!l:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?l:"a"===e?l.call(t):l?l.value:i.get(t)};class c{constructor(){t.add(this),e.set(this,void 0),this.reset()}reset(){!function(t,i,e,l,r){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!r:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===l?r.call(t,e):r?r.value=e:i.set(t,e)}(this,e,{F:["F","F","F","F","F","F","F","F"],B:["B","B","B","B","B","B","B","B"],R:["R","R","R","R","R","R","R","R"],L:["L","L","L","L","L","L","L","L"],U:["U","U","U","U","U","U","U","U"],D:["D","D","D","D","D","D","D","D"]},"f")}serialize(){return{F:f(this,t,"m",r).call(this,"F"),B:f(this,t,"m",r).call(this,"B"),R:f(this,t,"m",r).call(this,"R"),L:f(this,t,"m",r).call(this,"L"),U:f(this,t,"m",r).call(this,"U"),D:f(this,t,"m",r).call(this,"D")}}randomize(e=20){const l=["F","B","R","L","U","D"];for(let r=0;r<e;r++)f(this,t,"m",h).call(this,l[f(c,i,"m",a).call(c,0,5)],f(c,i,"m",a).call(c,-1,2))}F(i){return f(this,t,"m",h).call(this,"F",i),this}B(i){return f(this,t,"m",h).call(this,"B",i),this}R(i){return f(this,t,"m",h).call(this,"R",i),this}L(i){return f(this,t,"m",h).call(this,"L",i),this}U(i){return f(this,t,"m",h).call(this,"U",i),this}D(i){return f(this,t,"m",h).call(this,"D",i),this}}i=c,e=new WeakMap,t=new WeakSet,r=function(t){const i=f(this,e,"f")[t];return[i[0],i[1],i[2],i[7],t,i[3],i[6],i[5],i[4]]},s=function(t){const i=t%4;return 3===i?-1:-3===i?1:-2===i?2:i},h=function(e,l){let r=f(c,i,"m",s).call(c,l);if(-1===r)f(this,t,"m",n).call(this,e);else for(;r>0;)r--,f(this,t,"m",o).call(this,e)},o=function(t){const r=f(this,e,"f")[t],s=f(c,i,"f",l)[t];f(this,e,"f")[t]=[...r.slice(6),...r.slice(0,6)];const h=[f(this,e,"f")[s[3][0]][s[3][1][0]],f(this,e,"f")[s[3][0]][s[3][1][1]],f(this,e,"f")[s[3][0]][s[3][1][2]]];for(let t=3;t>0;t--)for(let i=0;i<3;i++)f(this,e,"f")[s[t][0]][s[t][1][i]]=f(this,e,"f")[s[t-1][0]][s[t-1][1][i]];for(let t=0;t<3;t++)f(this,e,"f")[s[0][0]][s[0][1][t]]=h[t]},n=function(t){const r=f(this,e,"f")[t],s=f(c,i,"f",l)[t];f(this,e,"f")[t]=[...r.slice(2),...r.slice(0,2)];const h=[f(this,e,"f")[s[0][0]][s[0][1][0]],f(this,e,"f")[s[0][0]][s[0][1][1]],f(this,e,"f")[s[0][0]][s[0][1][2]]];for(let t=0;t<3;t++)for(let i=0;i<3;i++)f(this,e,"f")[s[t][0]][s[t][1][i]]=f(this,e,"f")[s[t+1][0]][s[t+1][1][i]];for(let t=0;t<3;t++)f(this,e,"f")[s[3][0]][s[3][1][t]]=h[t]},a=function(t,i){return Math.floor(Math.random()*(i-t+1)+t)},l={value:{F:[["U",[0,1,2]],["R",[0,1,2]],["D",[0,1,2]],["L",[0,1,2]]],B:[["U",[4,5,6]],["L",[4,5,6]],["D",[4,5,6]],["R",[4,5,6]]],R:[["U",[6,7,0]],["B",[6,7,0]],["D",[2,3,4]],["F",[2,3,4]]],L:[["U",[2,3,4]],["F",[6,7,0]],["D",[6,7,0]],["B",[2,3,4]]],U:[["F",[0,1,2]],["L",[6,7,0]],["B",[0,1,2]],["R",[2,3,4]]],D:[["F",[4,5,6]],["R",[6,7,0]],["B",[4,5,6]],["L",[2,3,4]]]}};const d=c;var m,w,p,u,R=function(t,i,e,l){if("a"===e&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!l:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?l:"a"===e?l.call(t):l?l.value:i.get(t)};class L{constructor(){}static getSVG(t){if(54!==t.length)throw new Error("ERROR: Invalid cube color representation.");return[R(L,m,"m",u).call(L,t.slice(0,27)),R(L,m,"m",u).call(L,t.slice(27))]}static allowedFaceColours(){return Object.keys(R(L,m,"f",p))}}m=L,u=function(t){if(27!==t.length)throw new Error("ERROR: Invalid cube color representation.");let i=R(L,m,"f",w);for(let e=1;e<=27;e++){const l="{{COLOR_"+(e<10?"0":"")+e+"}}",r=R(L,m,"f",p)[t[e-1]];i=i.replace(l,r)}return i},w={value:'<svg class="cube" width="425" height="490" viewBox="0 0 425 490" xmlns="http://www.w3.org/2000/svg">\n    <metadata>C2S2 Rubik\'s cube. 2020-08-11T17:00:00 Rubik\'s cube for C2S2 programming test.</metadata>\n    <g>\n    <title>background</title>\n    <rect fill="none" id="canvas_background" height="492" width="427" y="-1" x="-1"/>\n    </g>\n    <g>\n    <title>Layer 1</title>\n    <g id="g3263">\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_01}}" d="m4.282,124.36l69.278,40l0,80l-69.278,-40l0,-80z" id="path3265"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_02}}" d="m73.56,164.36l69.29,40l0,80l-69.29,-40l0,-80z" id="path3267"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_03}}" d="m142.85,204.36l69.28,40l0,80l-69.28,-40l0,-80z" id="path3269"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_04}}" d="m4.282,204.36l69.278,40l0,80l-69.278,-40l0,-80z" id="path3271"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_05}}" d="m73.56,244.36l69.29,40l0,80l-69.29,-40l0,-80z" id="path3273"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_06}}" d="m142.85,284.36l69.28,40l0,80l-69.28,-40l0,-80z" id="path3275"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_07}}" d="m4.282,284.36l69.278,40l0,80l-69.278,-40l0,-80z" id="path3277"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_08}}" d="m73.56,324.36l69.29,40l0,80l-69.29,-40l0,-80z" id="path3279"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_09}}" d="m142.85,364.36l69.28,40l0,80l-69.28,-40l0,-80z" id="path3281"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_10}}" d="m212.13,484.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3283"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_11}}" d="m212.13,404.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3285"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_12}}" d="m212.13,324.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3287"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_13}}" d="m281.41,444.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3289"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_14}}" d="m281.41,364.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3291"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_15}}" d="m281.41,284.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3293"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_16}}" d="m350.69,404.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3295"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_17}}" d="m350.69,324.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3297"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_18}}" d="m350.69,244.36l0,-80l69.28,-40l0,80l-69.28,40z" id="path3299"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_19}}" d="m4.282,124.36l69.278,-40l69.29,40l-69.29,40l-69.278,-40z" id="path3301"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_20}}" d="m73.56,84.36l69.29,-40l69.28,40l-69.28,40l-69.29,-40z" id="path3303"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_21}}" d="m142.85,44.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3305"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_22}}" d="m73.56,164.36l69.29,-40l69.28,40l-69.28,40l-69.29,-40z" id="path3307"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_23}}" d="m142.85,124.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3309"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_24}}" d="m212.13,84.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3311"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_25}}" d="m142.85,204.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3313"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_26}}" d="m212.13,164.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3315"/>\n      <path stroke="#000000" stroke-width="5" fill="{{COLOR_27}}" d="m281.41,124.36l69.28,-40l69.28,40l-69.28,40l-69.28,-40z" id="path3317"/>\n    </g>\n    </g>\n  </svg>'},p={value:{r:"#ff0000",g:"#00aa00",b:"#0000ff",y:"#ffff00",o:"#ff8800",w:"#ffffff"}};const g=L;var O,D,k,v,B,F,U,b,C,E,T,y,z=function(t,i,e,l,r){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof i?t!==i||!r:!i.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?r.call(t,e):r?r.value=e:i.set(t,e),e},_=function(t,i,e,l){if("a"===e&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof i?t!==i||!l:!i.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===e?l:"a"===e?l.call(t):l?l.value:i.get(t)};D=new WeakMap,k=new WeakMap,v=new WeakMap,O=new WeakSet,B=function(t,i){return _(this,D,"f")[t](i),_(this,O,"m",F).call(this,t,i),z(this,k,_(this,D,"f").serialize(),"f"),this},F=function(t,i){const e=_(this,v,"f").length;if(e&&_(this,v,"f")[e-1][0]===t){_(this,v,"f")[e-1][1]+=i;let t=_(this,v,"f")[e-1][1];t=t>3?t%4:t,t=t<-3?t%4:t,t=3===t?-1:t,t=-3===t?1:t,_(this,v,"f")[e-1][1]=t,0===t&&_(this,v,"f").splice(e-1,1)}else _(this,v,"f").push([t,i])},U=function(){return[[1,1,"F"],[5,3,"R"],[3,5,"L"],[7,7,"B"]].forEach((t=>{if("D"===_(this,k,"f").D[t[0]]){for(;"D"===_(this,k,"f").U[t[1]];)_(this,O,"m",B).call(this,"U",1);_(this,O,"m",B).call(this,t[2],2)}})),[[5,7,"L","B"],[7,3,"B","R"],[3,1,"R","F"],[7,5,"F","L"]].forEach((t=>{var i,e;if("D"===_(this,k,"f")[t[2]][t[0]]){for(;"D"===_(this,k,"f").U[t[1]];)_(this,O,"m",B).call(this,"U",1);_(i=_(e=_(this,O,"m",B).call(this,t[2],1),O,"m",B).call(e,t[3],-1),O,"m",B).call(i,t[2],-1)}})),[["L",1,1,"F",1],["L",7,7,"B",-1],["B",5,5,"L",1],["B",3,3,"R",-1],["R",7,7,"B",1],["R",1,1,"F",-1],["F",5,3,"R",1],["F",3,5,"L",-1]].forEach((t=>{if("D"===_(this,k,"f")[t[0]][t[1]]){for(;"D"===_(this,k,"f").U[t[2]];)_(this,O,"m",B).call(this,"U",1);_(this,O,"m",B).call(this,t[3],t[4])}})),[["L",3,1,"F"],["B",1,5,"L"],["R",5,7,"B"],["F",1,3,"R"]].forEach((t=>{if("D"===_(this,k,"f")[t[0]][t[1]]){for(_(this,O,"m",B).call(this,t[0],1);"D"===_(this,k,"f").U[t[2]];)_(this,O,"m",B).call(this,"U",1);_(this,O,"m",B).call(this,t[3],1)}})),_(this,O,"m",b).call(this)},b=function(){return"D"===_(this,k,"f").U[1]&&"D"===_(this,k,"f").U[3]&&"D"===_(this,k,"f").U[5]&&"D"===_(this,k,"f").U[7]},C=function(){const t=[[1,1,"F"],[3,5,"R"],[7,1,"B"],[5,3,"L"]];for(let i=0;i<4;i++)t.forEach((t=>{"D"===_(this,k,"f").U[t[0]]&&_(this,k,"f")[t[2]][t[1]]===t[2]&&_(this,O,"m",B).call(this,t[2],2)})),_(this,O,"m",B).call(this,"U",1);return _(this,O,"m",E).call(this)},E=function(){return"D"===_(this,k,"f").D[1]&&"D"===_(this,k,"f").D[3]&&"D"===_(this,k,"f").D[5]&&"D"===_(this,k,"f").D[7]&&"F"===_(this,k,"f").F[7]&&"R"===_(this,k,"f").R[3]&&"B"===_(this,k,"f").B[7]&&"L"===_(this,k,"f").L[5]},T=function(){let t=!1;do{t=!1;let i=!1;do{i=!1;let t=!1;do{t=!1;{const t=[["F",0,"L",0,"leftTrigger"],["F",2,"R",2,"rightTrigger"],["R",2,"F",2,"leftTrigger"],["R",8,"B",0,"rightTrigger"],["B",0,"R",8,"leftTrigger"],["B",2,"L",6,"rightTrigger"],["L",6,"B",2,"leftTrigger"],["L",0,"F",0,"rightTrigger"]];let i=!1;do{i=!1;for(let e=0;e<4;e++)t.forEach((t=>{var e,l,r,s;_(this,k,"f")[t[0]][t[1]]===t[0]&&"D"===_(this,k,"f")[t[2]][t[3]]&&(i=!0,"leftTrigger"===t[4]?_(e=_(l=_(this,O,"m",B).call(this,t[2],-1),O,"m",B).call(l,"U",-1),O,"m",B).call(e,t[2],1):_(r=_(s=_(this,O,"m",B).call(this,t[2],1),O,"m",B).call(s,"U",1),O,"m",B).call(r,t[2],-1))})),_(this,O,"m",B).call(this,"U",1)}while(i)}[["F",6,"L","leftTrigger"],["F",8,"R","rightTrigger"],["R",0,"F","leftTrigger"],["R",6,"B","rightTrigger"],["B",6,"R","leftTrigger"],["B",8,"L","rightTrigger"],["L",8,"B","leftTrigger"],["L",2,"F","rightTrigger"]].forEach((i=>{var e,l,r,s;"D"===_(this,k,"f")[i[0]][i[1]]&&(t=!0,"leftTrigger"===i[3]?_(e=_(l=_(this,O,"m",B).call(this,i[2],-1),O,"m",B).call(l,"U",-1),O,"m",B).call(e,i[2],1):_(r=_(s=_(this,O,"m",B).call(this,i[2],1),O,"m",B).call(s,"U",1),O,"m",B).call(r,i[2],-1))}))}while(t);{const t=[[0,2,"R"],[2,0,"F"],[8,6,"L"],[6,8,"B"]];for(let e=0;e<4;e++)t.forEach((t=>{var e,l;"D"===_(this,k,"f").U[t[0]]&&"D"!==_(this,k,"f").D[t[1]]&&(i=!0,_(e=_(l=_(this,O,"m",B).call(this,t[2],1),O,"m",B).call(l,"U",2),O,"m",B).call(e,t[2],-1))})),_(this,O,"m",B).call(this,"U",1)}}while(i);[["F",6,"L",2],["R",0,"F",8],["B",6,"R",6],["L",8,"B",8]].forEach((i=>{var e,l;_(this,k,"f")[i[0]][i[1]]===i[0]&&_(this,k,"f")[i[2]][i[3]]===i[2]||(t=!0,_(e=_(l=_(this,O,"m",B).call(this,i[0],1),O,"m",B).call(l,"U",1),O,"m",B).call(e,i[0],-1))}))}while(t);return _(this,O,"m",y).call(this)},y=function(){return"D"===_(this,k,"f").D[0]&&"D"===_(this,k,"f").D[1]&&"D"===_(this,k,"f").D[2]&&"D"===_(this,k,"f").D[3]&&"D"===_(this,k,"f").D[4]&&"D"===_(this,k,"f").D[5]&&"D"===_(this,k,"f").D[6]&&"D"===_(this,k,"f").D[7]&&"D"===_(this,k,"f").D[8]&&"F"===_(this,k,"f").F[6]&&"F"===_(this,k,"f").F[7]&&"F"===_(this,k,"f").F[8]&&"R"===_(this,k,"f").R[0]&&"R"===_(this,k,"f").R[3]&&"R"===_(this,k,"f").R[6]&&"B"===_(this,k,"f").B[6]&&"B"===_(this,k,"f").B[7]&&"B"===_(this,k,"f").B[8]&&"L"===_(this,k,"f").L[8]&&"L"===_(this,k,"f").L[5]&&"L"===_(this,k,"f").L[2]};const S=class{constructor(t){O.add(this),D.set(this,void 0),k.set(this,void 0),v.set(this,[]),z(this,D,t,"f"),z(this,k,t.serialize(),"f")}getMoveHistory(){return _(this,v,"f")}solve(){if(!_(this,O,"m",y).call(this)){if(!_(this,O,"m",E).call(this)){if(!_(this,O,"m",b).call(this)){for(let t=0;t<4&&!_(this,O,"m",U).call(this);t++);if(!_(this,O,"m",b).call(this))throw new Error("Step 1 failed to complete")}if(!_(this,O,"m",C).call(this))throw new Error("Step 2 failed to complete")}if(!_(this,O,"m",T).call(this))throw new Error("Step 3 failed to complete")}return!1}};function M(t){const i=g.allowedFaceColours(),e=t.serialize(),{U:l,L:r,B:s}=e,h=function(t,i){var e={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&i.indexOf(l)<0&&(e[l]=t[l]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(l=Object.getOwnPropertySymbols(t);r<l.length;r++)i.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(t,l[r])&&(e[l[r]]=t[l[r]])}return e}(e,["U","L","B"]);if(6!==i.length)throw new Error("CubeRenderer Error: Cube should have 6 faces");const o={F:i[0],R:i[1],U:i[2],L:i[3],B:i[4],D:i[5]};return[...h.F,...h.R,l[2],l[5],l[8],l[1],l[4],l[7],l[0],l[3],l[6],r[2],r[5],r[8],r[1],r[4],r[7],r[0],r[3],r[6],s[2],s[5],s[8],s[1],s[4],s[7],s[0],s[3],s[6],...h.D].map((t=>o[t]))}window.render=function(){document.getElementById("cube").innerHTML=g.getSVG(M(window.cube)).join(" ")},window.solveCube=function(){const t=new S(window.cube);t.solve();const i=t.getMoveHistory();window.renderSolution(i),window.render()},window.onload=function(){window.cube=new d,window.render(),window.CubeSolver=S},window.renderSolution=function(t){const i=document.getElementById("solution");i.innerHTML="";for(let e=t.length-1;e>=0;e--){const l=document.createElement("div");l.setAttribute("class","sol_panel");const r=document.createElement("div");r.innerHTML=`Step ${e+1} - Move: ${t[e][0]} (${t[e][1]})`;const s=g.getSVG(M(window.cube)).join(" ");l.innerHTML=s,l.prepend(r),i.prepend(l),window.cube[t[e][0]](0-t[e][1])}const e=document.createElement("div");e.setAttribute("class","sol_panel");const l=document.createElement("div");l.innerHTML="Given Cube";const r=g.getSVG(M(window.cube)).join(" ");e.innerHTML=r,e.prepend(l),i.prepend(e)}})();